@if (isLoading) {
	<p class="text-secondary">Loading...</p>
} @else if (installedVersions.length === 0) {
	<p class="text-secondary">No versions installed yet. Use "Install New Version" to get started.</p>
} @else {
	@if (launchError) {
		<div class="alert alert-danger alert-dismissible mb-3">
			{{launchError}}
			<button type="button" class="btn-close" (click)="launchError = null"></button>
		</div>
	}

	<table class="table table-hover align-middle">
		<thead>
			<tr>
				<th></th>
				<th>Name</th>
				<th>Version</th>
				<th>Path</th>
				<th>Installed</th>
				<th style="width: 80px;"></th>
				<th></th>
			</tr>
		</thead>
		<tbody>
			@for (v of installedVersions; track v.executablePath) {
				<tr>
					<td>
						<button class="btn btn-sm btn-success"
							(click)="launch(v)"
							[disabled]="isLaunching(v)"
							title="Play"
						>
							@if (isLaunching(v)) {
								<span class="spinner-border spinner-border-sm" role="status"></span>
							} @else {
								▶
							}
						</button>
					</td>
					<td>{{v.name}}</td>
					<td>{{v.version}}</td>
					<td>
						<code class="text-truncate d-inline-block" style="max-width: 200px;"
							[title]="v.executablePath"
						>{{v.executablePath}}</code>
					</td>
					<td>{{v.installedAt | date:'YYYY-LL-dd'}}</td>
					<td>
						<div class="btn-group btn-group-sm" role="group">
							<button type="button" class="btn btn-outline-secondary"
								(click)="moveUp(v)"
								[disabled]="!canMoveUp(v)"
								title="Move up"
							>↑</button>
							<button type="button" class="btn btn-outline-secondary"
								(click)="moveDown(v)"
								[disabled]="!canMoveDown(v)"
								title="Move down"
							>↓</button>
						</div>
					</td>
					<td>
						<button class="btn btn-sm btn-outline-secondary"
							(click)="onEditClick(v)"
							title="Edit"
						>⚙</button>
					</td>
				</tr>
			}
		</tbody>
	</table>
}
